rm -rf /tmp/*test-raftstore*
GO111MODULE=on go test -v --count=1 --parallel=1 -p=1 ./kv/test_raftstore -run ^TestTransferLeader3B|| true
=== RUN   TestTransferLeader3B
2023/07/19 14:28:04.164934 node.go:193: [0;37m[info] start raft store node, storeID: 4[0m
2023/07/19 14:28:04.165438 peer.go:41: [0;37m[info] region id:1 region_epoch:<conf_ver:1 version:1 > peers:<id:5 store_id:5 > peers:<id:1 store_id:1 > peers:<id:2 store_id:2 > peers:<id:3 store_id:3 > peers:<id:4 store_id:4 >  create peer with ID 4[0m
--- PASS: TestTransferLeader3B (1.43s)
PASS
ok  	github.com/pingcap-incubator/tinykv/kv/test_raftstore	1.469s
GO111MODULE=on go test -v --count=1 --parallel=1 -p=1 ./kv/test_raftstore -run ^TestBasicConfChange3B|| true
=== RUN   TestBasicConfChange3B
2023/07/19 14:28:07.233910 node.go:193: [0;37m[info] start raft store node, storeID: 1[0m
2023/07/19 14:28:07.234163 peer.go:41: [0;37m[info] region id:1 region_epoch:<conf_ver:1 version:1 > peers:<id:3 store_id:3 > peers:<id:4 store_id:4 > peers:<id:5 store_id:5 > peers:<id:1 store_id:1 > peers:<id:2 store_id:2 >  create peer with ID 1[0m
2023/07/19 14:28:08.337844 peer_msg_handler.go:167: [0;31m[error] err only have 2 nodes[0m
2023/07/19 14:28:08.338335 peer_msg_handler.go:167: [0;31m[error] err only have 2 nodes[0m
--- PASS: TestBasicConfChange3B (2.37s)
PASS
ok  	github.com/pingcap-incubator/tinykv/kv/test_raftstore	2.405s
GO111MODULE=on go test -v --count=1 --parallel=1 -p=1 ./kv/test_raftstore -run ^TestConfChangeRemoveLeader3B|| true
=== RUN   TestConfChangeRemoveLeader3B
2023/07/19 14:28:11.208770 node.go:193: [0;37m[info] start raft store node, storeID: 1[0m
2023/07/19 14:28:11.209174 peer.go:41: [0;37m[info] region id:1 region_epoch:<conf_ver:1 version:1 > peers:<id:1 store_id:1 > peers:<id:2 store_id:2 > peers:<id:3 store_id:3 > peers:<id:4 store_id:4 > peers:<id:5 store_id:5 >  create peer with ID 1[0m
2023/07/19 14:28:12.015356 store_worker.go:82: [0;31m[error] handle raft message failed storeID 1, tombstone peer [epoch: conf_ver:1 version:1 ] received an invalid message MsgAppendResponse, ignore it[0m
2023/07/19 14:28:14.211285 peer_msg_handler.go:524: [0;31m[error] [defend]leaderNode{1} changeLeader to {5}[0m
2023/07/19 14:28:14.313404 peer_msg_handler.go:167: [0;31m[error] err only have 2 nodes[0m
2023/07/19 14:28:14.314239 peer_msg_handler.go:167: [0;31m[error] err only have 2 nodes[0m
--- PASS: TestConfChangeRemoveLeader3B (3.69s)
PASS
ok  	github.com/pingcap-incubator/tinykv/kv/test_raftstore	3.738s
GO111MODULE=on go test -v --count=1 --parallel=1 -p=1 ./kv/test_raftstore -run ^TestConfChangeRecover3B|| true
=== RUN   TestConfChangeRecover3B
2023/07/19 14:28:16.482690 node.go:193: [0;37m[info] start raft store node, storeID: 5[0m
2023/07/19 14:28:16.482985 peer.go:41: [0;37m[info] region id:1 region_epoch:<conf_ver:1 version:1 > peers:<id:3 store_id:3 > peers:<id:4 store_id:4 > peers:<id:5 store_id:5 > peers:<id:1 store_id:1 > peers:<id:2 store_id:2 >  create peer with ID 5[0m
2023/07/19 14:28:19.588080 peer_msg_handler.go:167: [0;31m[error] err only have 2 nodes[0m
2023/07/19 14:28:19.589324 peer_msg_handler.go:167: [0;31m[error] err only have 2 nodes[0m
2023/07/19 14:28:20.085841 peer_msg_handler.go:524: [0;31m[error] [defend]leaderNode{2} changeLeader to {6}[0m
2023/07/19 14:28:20.985993 peer_msg_handler.go:524: [0;31m[error] [defend]leaderNode{2} changeLeader to {6}[0m
2023/07/19 14:28:21.086022 peer_msg_handler.go:524: [0;31m[error] [defend]leaderNode{2} changeLeader to {6}[0m
2023/07/19 14:28:21.095411 peer_msg_handler.go:524: [0;31m[error] [defend]leaderNode{2} changeLeader to {6}[0m
2023/07/19 14:28:21.186075 peer_msg_handler.go:524: [0;31m[error] [defend]leaderNode{2} changeLeader to {6}[0m
2023/07/19 14:28:21.286908 peer_msg_handler.go:524: [0;31m[error] [defend]leaderNode{2} changeLeader to {6}[0m
2023/07/19 14:28:21.386851 peer_msg_handler.go:524: [0;31m[error] [defend]leaderNode{2} changeLeader to {6}[0m
2023/07/19 14:28:21.486145 peer_msg_handler.go:524: [0;31m[error] [defend]leaderNode{2} changeLeader to {6}[0m
2023/07/19 14:28:21.585174 peer_msg_handler.go:524: [0;31m[error] [defend]leaderNode{2} changeLeader to {6}[0m
2023/07/19 14:28:21.685721 peer_msg_handler.go:167: [0;31m[error] err only have 2 nodes[0m
2023/07/19 14:28:21.686055 peer_msg_handler.go:167: [0;31m[error] err only have 2 nodes[0m
--- PASS: TestConfChangeRecover3B (25.81s)
PASS
ok  	github.com/pingcap-incubator/tinykv/kv/test_raftstore	26.010s
GO111MODULE=on go test -v --count=1 --parallel=1 -p=1 ./kv/test_raftstore -run ^TestConfChangeRecoverManyClients3B|| true
=== RUN   TestConfChangeRecoverManyClients3B
2023/07/19 14:28:45.393311 node.go:193: [0;37m[info] start raft store node, storeID: 1[0m
2023/07/19 14:28:45.393547 peer.go:41: [0;37m[info] region id:1 region_epoch:<conf_ver:1 version:1 > peers:<id:1 store_id:1 > peers:<id:2 store_id:2 > peers:<id:3 store_id:3 > peers:<id:4 store_id:4 > peers:<id:5 store_id:5 >  create peer with ID 1[0m
--- PASS: TestConfChangeRecoverManyClients3B (51.96s)
PASS
ok  	github.com/pingcap-incubator/tinykv/kv/test_raftstore	52.113s
GO111MODULE=on go test -v --count=1 --parallel=1 -p=1 ./kv/test_raftstore -run ^TestConfChangeUnreliable3B|| true
=== RUN   TestConfChangeUnreliable3B
2023/07/19 14:29:39.723121 node.go:193: [0;37m[info] start raft store node, storeID: 1[0m
2023/07/19 14:29:39.723645 peer.go:41: [0;37m[info] region id:1 region_epoch:<conf_ver:1 version:1 > peers:<id:2 store_id:2 > peers:<id:3 store_id:3 > peers:<id:4 store_id:4 > peers:<id:5 store_id:5 > peers:<id:1 store_id:1 >  create peer with ID 1[0m
2023/07/19 14:29:46.776738 store_worker.go:82: [0;31m[error] handle raft message failed storeID 2, tombstone peer [epoch: conf_ver:9 version:1 ] received an invalid message MsgRequestVote, ignore it[0m
2023/07/19 14:29:46.778266 store_worker.go:82: [0;31m[error] handle raft message failed storeID 2, tombstone peer [epoch: conf_ver:9 version:1 ] received an invalid message MsgAppend, ignore it[0m
2023/07/19 14:29:46.778318 store_worker.go:82: [0;31m[error] handle raft message failed storeID 2, tombstone peer [epoch: conf_ver:9 version:1 ] received an invalid message MsgAppend, ignore it[0m
2023/07/19 14:29:46.778329 store_worker.go:82: [0;31m[error] handle raft message failed storeID 2, tombstone peer [epoch: conf_ver:9 version:1 ] received an invalid message MsgAppend, ignore it[0m
2023/07/19 14:29:46.778955 store_worker.go:82: [0;31m[error] handle raft message failed storeID 2, tombstone peer [epoch: conf_ver:9 version:1 ] received an invalid message MsgAppend, ignore it[0m
2023/07/19 14:29:46.779582 store_worker.go:82: [0;31m[error] handle raft message failed storeID 2, tombstone peer [epoch: conf_ver:9 version:1 ] received an invalid message MsgAppend, ignore it[0m
2023/07/19 14:29:46.780176 store_worker.go:82: [0;31m[error] handle raft message failed storeID 2, tombstone peer [epoch: conf_ver:9 version:1 ] received an invalid message MsgAppend, ignore it[0m
2023/07/19 14:29:46.826754 store_worker.go:82: [0;31m[error] handle raft message failed storeID 2, tombstone peer [epoch: conf_ver:9 version:1 ] received an invalid message MsgHeartbeat, ignore it[0m
2023/07/19 14:29:46.877782 store_worker.go:82: [0;31m[error] handle raft message failed storeID 2, tombstone peer [epoch: conf_ver:9 version:1 ] received an invalid message MsgAppend, ignore it[0m
2023/07/19 14:29:46.880067 store_worker.go:82: [0;31m[error] handle raft message failed storeID 2, tombstone peer [epoch: conf_ver:9 version:1 ] received an invalid message MsgAppend, ignore it[0m
--- PASS: TestConfChangeUnreliable3B (25.40s)
PASS
ok  	github.com/pingcap-incubator/tinykv/kv/test_raftstore	25.508s
GO111MODULE=on go test -v --count=1 --parallel=1 -p=1 ./kv/test_raftstore -run ^TestConfChangeUnreliableRecover3B|| true
=== RUN   TestConfChangeUnreliableRecover3B
2023/07/19 14:30:06.900566 node.go:193: [0;37m[info] start raft store node, storeID: 4[0m
2023/07/19 14:30:06.900957 peer.go:41: [0;37m[info] region id:1 region_epoch:<conf_ver:1 version:1 > peers:<id:1 store_id:1 > peers:<id:2 store_id:2 > peers:<id:3 store_id:3 > peers:<id:4 store_id:4 > peers:<id:5 store_id:5 >  create peer with ID 4[0m
2023/07/19 14:30:08.905886 peer_msg_handler.go:167: [0;31m[error] err only have 2 nodes[0m
2023/07/19 14:30:08.906195 peer_msg_handler.go:167: [0;31m[error] err only have 2 nodes[0m
2023/07/19 14:30:09.103324 peer_msg_handler.go:524: [0;31m[error] [defend]leaderNode{1} changeLeader to {6}[0m
2023/07/19 14:30:10.103811 peer_msg_handler.go:524: [0;31m[error] [defend]leaderNode{1} changeLeader to {6}[0m
2023/07/19 14:30:10.204351 peer_msg_handler.go:524: [0;31m[error] [defend]leaderNode{1} changeLeader to {6}[0m
2023/07/19 14:30:10.303751 peer_msg_handler.go:524: [0;31m[error] [defend]leaderNode{1} changeLeader to {6}[0m
2023/07/19 14:30:10.404977 peer_msg_handler.go:524: [0;31m[error] [defend]leaderNode{1} changeLeader to {6}[0m
2023/07/19 14:30:10.504593 peer_msg_handler.go:524: [0;31m[error] [defend]leaderNode{1} changeLeader to {6}[0m
2023/07/19 14:30:10.603603 peer_msg_handler.go:524: [0;31m[error] [defend]leaderNode{1} changeLeader to {6}[0m
2023/07/19 14:30:10.704140 peer_msg_handler.go:524: [0;31m[error] [defend]leaderNode{1} changeLeader to {6}[0m
2023/07/19 14:30:10.803012 peer_msg_handler.go:524: [0;31m[error] [defend]leaderNode{1} changeLeader to {6}[0m
2023/07/19 14:30:10.904062 peer_msg_handler.go:524: [0;31m[error] [defend]leaderNode{1} changeLeader to {6}[0m
2023/07/19 14:30:11.803692 peer_msg_handler.go:524: [0;31m[error] [defend]leaderNode{1} changeLeader to {6}[0m
2023/07/19 14:30:11.903847 peer_msg_handler.go:524: [0;31m[error] [defend]leaderNode{1} changeLeader to {6}[0m
2023/07/19 14:30:12.003977 peer_msg_handler.go:524: [0;31m[error] [defend]leaderNode{1} changeLeader to {6}[0m
2023/07/19 14:30:12.102894 peer_msg_handler.go:524: [0;31m[error] [defend]leaderNode{1} changeLeader to {6}[0m
2023/07/19 14:30:12.203829 peer_msg_handler.go:524: [0;31m[error] [defend]leaderNode{1} changeLeader to {6}[0m
2023/07/19 14:30:12.305413 peer_msg_handler.go:524: [0;31m[error] [defend]leaderNode{1} changeLeader to {6}[0m
2023/07/19 14:30:13.803431 peer_msg_handler.go:524: [0;31m[error] [defend]leaderNode{1} changeLeader to {6}[0m
2023/07/19 14:30:13.904337 peer_msg_handler.go:524: [0;31m[error] [defend]leaderNode{1} changeLeader to {6}[0m
2023/07/19 14:30:13.912101 peer_msg_handler.go:524: [0;31m[error] [defend]leaderNode{1} changeLeader to {6}[0m
2023/07/19 14:30:14.004130 peer_msg_handler.go:524: [0;31m[error] [defend]leaderNode{1} changeLeader to {6}[0m
2023/07/19 14:30:14.103978 peer_msg_handler.go:524: [0;31m[error] [defend]leaderNode{1} changeLeader to {6}[0m
2023/07/19 14:30:14.204128 peer_msg_handler.go:524: [0;31m[error] [defend]leaderNode{1} changeLeader to {6}[0m
2023/07/19 14:30:14.303537 peer_msg_handler.go:524: [0;31m[error] [defend]leaderNode{1} changeLeader to {6}[0m
2023/07/19 14:30:14.355698 peer_msg_handler.go:167: [0;31m[error] err only have 2 nodes[0m
2023/07/19 14:30:14.356331 peer_msg_handler.go:167: [0;31m[error] err only have 2 nodes[0m
--- PASS: TestConfChangeUnreliableRecover3B (32.55s)
PASS
ok  	github.com/pingcap-incubator/tinykv/kv/test_raftstore	32.721s
GO111MODULE=on go test -v --count=1 --parallel=1 -p=1 ./kv/test_raftstore -run ^TestConfChangeSnapshotUnreliableRecover3B|| true
=== RUN   TestConfChangeSnapshotUnreliableRecover3B
2023/07/19 14:30:41.394610 node.go:193: [0;37m[info] start raft store node, storeID: 4[0m
2023/07/19 14:30:41.395073 peer.go:41: [0;37m[info] region id:1 region_epoch:<conf_ver:1 version:1 > peers:<id:4 store_id:4 > peers:<id:5 store_id:5 > peers:<id:1 store_id:1 > peers:<id:2 store_id:2 > peers:<id:3 store_id:3 >  create peer with ID 4[0m
2023/07/19 14:30:43.898718 peer_msg_handler.go:524: [0;31m[error] [defend]leaderNode{5} changeLeader to {1}[0m
2023/07/19 14:30:48.298596 peer_msg_handler.go:524: [0;31m[error] [defend]leaderNode{5} changeLeader to {1}[0m
2023/07/19 14:30:48.397913 peer_msg_handler.go:524: [0;31m[error] [defend]leaderNode{5} changeLeader to {1}[0m
2023/07/19 14:30:48.498427 peer_msg_handler.go:524: [0;31m[error] [defend]leaderNode{5} changeLeader to {1}[0m
2023/07/19 14:30:48.598891 peer_msg_handler.go:524: [0;31m[error] [defend]leaderNode{5} changeLeader to {1}[0m
2023/07/19 14:30:48.697641 peer_msg_handler.go:524: [0;31m[error] [defend]leaderNode{5} changeLeader to {1}[0m
2023/07/19 14:30:48.800896 peer_msg_handler.go:167: [0;31m[error] err only have 2 nodes[0m
2023/07/19 14:30:48.801926 peer_msg_handler.go:167: [0;31m[error] err only have 2 nodes[0m
FAIL	github.com/pingcap-incubator/tinykv/kv/test_raftstore	18.834s
